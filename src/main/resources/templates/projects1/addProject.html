<!DOCTYPE html>
<html lang="en" layout:decorate="~{main-layout/mainLayout}"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>addProject</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>


    <title> ADD NEW PROJECT </title>
</head>

<body>
<div class="container">

    <h1 th:if="${project.id == null}">
        Nowy projekt
    </h1>
    <h1 th:if="${project.id != null}">
        Edycja projektu <span th:text="${project.code}"></span>
    </h1>





    <h1 id="message-placeholder"></h1>




    <form class="needs-validation" novalidate th:action="@{/projects/save}" th:object="${project}" method="post">
        <input type="hidden" th:field="*{id}">

        <div class="col-md-4">
            <label for="validationServerProject-name" class="form-label">projectName</label>
            <div class="input-group has-validation">
                <span class="input-group-text" id="project-name">@</span>
                <input type="text" class="form-control is-invalid" id="validationServerProject-name"
                       aria-describedby="inputGroupPrepend3 validationServerProject-nameFeedback"
                       th:field="*{name}" required>
                <div id="validationServerProject-nameFeedback" class="invalid-feedback">
                    Please type project name.
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <label for="validationServerProject-Code" class="form-label">projectCode</label>
            <div class="input-group has-validation">
                <span class="input-group-text" id="project-Code">@</span>
                <input type="text" class="form-control is-invalid" id="validationServerProject-code"
                       aria-describedby="inputGroupPrepend3 validationServerProject-codeFeedback"
                       th:field="*{code}" required>
                <div id="validationServerProject-codeFeedback" class="invalid-feedback">
                    Please type project code.
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <label for="validationServerProject-description" class="form-label">description</label>
            <div class="input-group has-validation">
                <span class="input-group-text" id="project-description">@</span>
                <input type="text" class="form-control is-invalid" id="validationServerProject-description"
                       aria-describedby="inputGroupPrepend3 validationServerProject-descriptionFeedback"
                       th:field="*{description}" required>
                <div id="validationServerProject-descriptionFeedback" class="invalid-feedback">
                    Please type project description.
                </div>
            </div>
        </div>

        <script>
            // Funkcja sprawdzająca pole tekstowe i wyświetlająca komunikat walidacyjny
            function validateInput(inputId, feedbackId) {
                var input = document.getElementById(inputId);
                var feedback = document.getElementById(feedbackId);
                if (input.value.trim() === "") {
                    input.classList.add("is-invalid");
                    feedback.style.display = "block";
                } else {
                    input.classList.remove("is-invalid");
                    feedback.style.display = "none";
                }
            }

            // Nasłuchiwanie zmian w polach tekstowych
            var nameInput = document.getElementById("validationServerProject-name");
            nameInput.addEventListener("input", function() {
                validateInput("validationServerProject-name", "validationServerProject-nameFeedback");
            });

            var codeInput = document.getElementById("validationServerProject-code");
            codeInput.addEventListener("input", function() {
                validateInput("validationServerProject-code", "validationServerProject-codeFeedback");
            });

            var descriptionInput = document.getElementById("validationServerProject-description");
            descriptionInput.addEventListener("input", function() {
                validateInput("validationServerProject-description", "validationServerProject-descriptionFeedback");
            });
        </script>

        <div>
            <label for="creator">Project Creator:</label>
            <select id="creator" name="creatorId" th:field="*{creator}">
                <option th:each="person : ${people}" th:value="${person.id}" th:text="${person.name}"></option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">
            save
        </button>
    </form>

    <script>
        const inputField = document.getElementById('validationServer01');
        const validationMessage = document.getElementById('validationMessage');

        inputField.addEventListener('input', function() {
            if (inputField.value.trim() === '') {
                inputField.classList.add('is-invalid');
                validationMessage.style.display = 'block';
            } else {
                inputField.classList.remove('is-invalid');
                validationMessage.style.display = 'none';
            }
        });
    </script>

</div>

</body>
</html>